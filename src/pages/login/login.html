<!--
  Generated template for the LoginPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<!-- <ion-header>
  <ion-navbar>
    <ion-title>login</ion-title>
  </ion-navbar>
</ion-header> -->

<ion-content>

  <ion-grid class="topSection boxShadow">
    <div text-center>
      <img src="./assets/imgs/appLogo.jpg" class="appLogo">
    </div>
    <ion-segment [(ngModel)]="accountTabs">
      <ion-segment-button value="login">Login</ion-segment-button>
      <ion-segment-button value="signup">Sign up</ion-segment-button>
    </ion-segment>
  </ion-grid>

  <ion-grid [(ngSwitch)]="accountTabs" class="inputSection">

    <div [formGroup]="onLoginForm" *ngSwitchCase="'login'">
      <ion-item no-lines>
        <ion-input [(ngModel)]="emailAddress" formControlName="emailAddress" type="email" placeholder="Email">
        </ion-input>
      </ion-item>
      <p class="errorMsg"
        *ngIf="onLoginForm.get('emailAddress').touched && onLoginForm.get('emailAddress').hasError('required')">Email or
        Phone Number
        is required</p>

      <ion-item no-lines>
        <ion-input [(ngModel)]="password" formControlName="password" type="password" placeholder="Password"></ion-input>
      </ion-item>
      <p class="errorMsg"
        *ngIf="onLoginForm.get('password').touched && onLoginForm.get('password').hasError('required')">Password
        is required</p>

      <button (click)="onLogin()" [disabled]="!onLoginForm.valid" class="h-45" ion-button block>Sign in</button>
      <p text-right class="gray">
        <span (click)="navCtrl.push('ResetPasswordPage')">Forgot your password?</span>
      </p>
    </div>

    <div [formGroup]="onRegisterForm" *ngSwitchCase="'signup'">
      <ion-item no-lines>
        <ion-input [(ngModel)]="firstName" formControlName="firstName" type="text" placeholder="First Name"></ion-input>
      </ion-item>
      <p class="errorMsg"
        *ngIf="onRegisterForm.get('firstName').touched && onRegisterForm.get('firstName').hasError('required')">This
        field is required</p>

      <ion-item no-lines>
        <ion-input [(ngModel)]="lastName" formControlName="lastName" type="text" placeholder="Last Name"></ion-input>
      </ion-item>
      <p class="errorMsg"
        *ngIf="onRegisterForm.get('lastName').touched && onRegisterForm.get('lastName').hasError('required')">This
        field is required</p>

      <ion-item no-lines>
        <ion-input [(ngModel)]="emailAddress" formControlName="emailAddress" type="email" placeholder="Email Address">
        </ion-input>
      </ion-item>
      <p class="errorMsg"
        *ngIf="onRegisterForm.get('emailAddress').touched && onRegisterForm.get('emailAddress').hasError('required')">
        This field is required</p>
      <p class="errorMsg"
        *ngIf="onRegisterForm.get('emailAddress').touched && onRegisterForm.get('emailAddress').hasError('pattern')">
        Invalid Email address</p>

      <ion-item no-lines>
        <ion-input [(ngModel)]="phoneNumber" formControlName="phoneNumber" type="tel"
          placeholder="Phone (+18430000000)">
        </ion-input>
      </ion-item>
      <p class="errorMsg"
        *ngIf="onRegisterForm.get('phoneNumber').touched && onRegisterForm.get('phoneNumber').hasError('required')">This
        field is required</p>

      <ion-item no-lines>
        <ion-input [(ngModel)]="password" formControlName="password" type="password" placeholder="Password"></ion-input>
      </ion-item>
      <p class="errorMsg"
        *ngIf="onRegisterForm.get('password').touched && onRegisterForm.get('password').hasError('required')">This
        field is required</p>

      <ion-item no-lines>
        <ion-input [(ngModel)]="confirmPassword" formControlName="confirmPassword" type="password"
          placeholder="Confirm Password"></ion-input>
      </ion-item>
      <p class="errorMsg"
        *ngIf="onRegisterForm.get('confirmPassword').touched && onRegisterForm.get('confirmPassword').hasError('required')">
        This field is required</p>

      <button (click)="registerUser()" [disabled]="!onRegisterForm.valid" class="h-45" ion-button block>Sign up</button>

      <p class="gray">
        By using WhatsPay, i agree to its
        <span (click)="navCtrl.push('TermsConditionsPage')" class="primary">Terms of Service</span> and
        <span (click)="navCtrl.push('PrivacyPolicyPage')" class="primary">Privacy Policies.</span>
      </p>
    </div>

  </ion-grid>

</ion-content>


<div *ngIf="showSuccess" class="successModal">
  <div padding class="center innerDiv">
    <img src="./assets/imgs/user-check-512.png">
    <h5>Your account has been created successfully!</h5>
    <p>
      Remember <strong>{{userCode}}</strong> is your usercode, and will be used in order to send and receive money.
    </p>
    <button class="h-45" ion-button block small (click)="navCtrl.push('RegisterCardPage')">Proceed</button>
  </div>
</div>